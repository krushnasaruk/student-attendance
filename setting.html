<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Settings</title>
  <style>
    :root{
      --bg-a:#071029;
      --bg-b:#0f1b2b;
      --surface:rgba(255,255,255,0.04);
      --text:#e6eef8;
      --muted:#bfc9d6;
      --accent:#3b82f6;
      --accent-hover:#60a5fa;
      --border:rgba(255,255,255,0.1);
    }
    .light-theme{
      --bg-a:#f7fbff;
      --bg-b:#eef6ff;
      --surface:rgba(2,6,23,0.04);
      --text:#0b1220;
      --muted:#556074;
      --accent:#2563eb;
      --accent-hover:#3b82f6;
      --border:rgba(2,6,23,0.1);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    html,body{height:100%;min-height:100vh}
    body{
      background:linear-gradient(180deg,var(--bg-a),var(--bg-b));
      color:var(--text);
      display:flex;
      transition: background 0.35s ease, color 0.35s ease;
      flex-direction:column;
    }

    .header{
      padding:20px 24px;
      border-bottom:1px solid var(--border);
      background:var(--bg-a);
    }

    .header h1{font-size:24px;margin-bottom:4px}
    .header p{color:var(--muted);font-size:14px}

    .container{
      flex:1;
      max-width:900px;
      width:100%;
      margin:0 auto;
      padding:24px;
      overflow-y:auto;
    }

    .settings-section{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:12px;
      padding:20px;
      margin-bottom:16px;
    }

    .section-title{
      font-size:16px;
      font-weight:600;
      margin-bottom:16px;
      display:flex;
      align-items:center;
      gap:8px;
    }

    .setting-item{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:12px 0;
      border-bottom:1px solid var(--border);
    }

    .setting-item:last-child{border-bottom:none}

    .setting-label{
      display:flex;
      flex-direction:column;
      gap:2px;
    }

    .setting-label > strong{font-size:14px}
    .setting-label > span{font-size:12px;color:var(--muted)}

    .toggle-switch{
      width:50px;height:28px;
      background:rgba(255,255,255,0.1);
      border:none;
      border-radius:14px;
      cursor:pointer;
      position:relative;
      transition:background 0.3s ease;
    }

    .toggle-switch.active{background:var(--accent)}

    .toggle-switch::after{
      content:'';
      position:absolute;
      width:24px;height:24px;
      background:white;
      border-radius:50%;
      top:2px;left:2px;
      transition:left 0.3s ease;
    }

    .toggle-switch.active::after{left:24px}

    .input-field{
      width:100%;
      max-width:300px;
      padding:8px 12px;
      background:rgba(255,255,255,0.05);
      border:1px solid var(--border);
      border-radius:8px;
      color:var(--text);
      outline:none;
    }

    .input-field:focus{border-color:var(--accent)}

    .select-field{
      padding:8px 12px;
      background:rgba(255,255,255,0.05);
      border:1px solid var(--border);
      border-radius:8px;
      color:var(--text);
      outline:none;
      cursor:pointer;
    }

    .select-field:focus{border-color:var(--accent)}

    .select-field option{background:var(--bg-b);color:var(--text)}

    .btn{
      display:inline-block;
      padding:10px 16px;
      border-radius:10px;
      background:var(--accent);
      color:white;
      text-decoration:none;
      border:none;
      cursor:pointer;
      transition:all 0.2s ease;
      font-size:14px;
      font-weight:500;
    }

    .btn:hover{background:var(--accent-hover);transform:translateY(-2px)}

    .btn.secondary{
      background:rgba(255,255,255,0.06);
      color:var(--text);
    }

    .btn.secondary:hover{background:rgba(255,255,255,0.1)}

    .btn.danger{background:#ef4444}

    .footer{
      padding:20px 24px;
      border-top:1px solid var(--border);
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:var(--bg-a);
    }

    .footer p{font-size:12px;color:var(--muted)}

    .profile-pic-container{
      display:flex;
      align-items:center;
      gap:16px;
      margin-bottom:16px;
    }

    .profile-pic{
      width:80px;height:80px;
      border-radius:50%;
      background:var(--accent);
      display:flex;
      align-items:center;
      justify-content:center;
      color:white;
      font-size:32px;
      font-weight:700;
    }

    .device-item{
      background:rgba(255,255,255,0.02);
      padding:12px;
      border-radius:8px;
      margin-bottom:8px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .device-info{font-size:13px}
    .device-time{color:var(--muted);font-size:12px}

    .faq-item{margin-bottom:12px}

    .faq-question{
      padding:12px;
      background:rgba(255,255,255,0.02);
      border-radius:8px;
      cursor:pointer;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-weight:500;
    }

    .faq-question:hover{background:rgba(255,255,255,0.04)}

    .faq-answer{
      padding:12px;
      margin-top:4px;
      background:rgba(255,255,255,0.03);
      border-radius:8px;
      color:var(--muted);
      display:none;
      font-size:13px;
      line-height:1.5;
    }

    .faq-item.open .faq-answer{display:block}

    @media(max-width:768px){
      .container{padding:16px}
      .settings-section{padding:16px}
      .setting-item{flex-direction:column;align-items:flex-start;gap:12px}
    }
  </style>
  <script>
    function applySavedTheme(){
      try{const saved=localStorage.getItem('theme');document.body.classList.toggle('light-theme',saved==='light')}catch(e){}
    }
    applySavedTheme();
    window.addEventListener('pageshow', applySavedTheme);

    document.addEventListener('DOMContentLoaded', ()=>{
      // Toggle switches
      document.querySelectorAll('.toggle-switch').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          if(e.target.onclick !== undefined) return;
          btn.classList.toggle('active');
          const key = btn.getAttribute('data-key');
          if(key){
            const isActive = btn.classList.contains('active');
            try{localStorage.setItem(key, isActive ? 'true' : 'false')}catch(e){}
          }
        });
      });

      // Load saved toggle states
      document.querySelectorAll('.toggle-switch[data-key]').forEach(btn=>{
        const key = btn.getAttribute('data-key');
        try{
          const saved = localStorage.getItem(key);
          if(saved === 'true') btn.classList.add('active');
        }catch(e){}
      });

      // FAQ Toggle
      document.querySelectorAll('.faq-question').forEach(q=>{
        q.addEventListener('click', ()=>{
          const item = q.closest('.faq-item');
          item.classList.toggle('open');
        });
      });

      // Profile Picture Upload
      const uploadBtn = document.getElementById('uploadProfileBtn');
      if(uploadBtn){
        uploadBtn.addEventListener('click', ()=>{
          const input = document.createElement('input');
          input.type = 'file';
          input.accept = 'image/*';
          input.onchange = (e)=>{
            const file = e.target.files[0];
            if(file){
              const reader = new FileReader();
              reader.onload = (event)=>{
                document.getElementById('profilePic').innerHTML = `<img src="${event.target.result}" style="width:100%;height:100%;object-fit:cover;border-radius:50%">`;
                try{localStorage.setItem('profilePic', event.target.result)}catch(e){}
              };
              reader.readAsDataURL(file);
            }
          };
          input.click();
        });
      }

      // Load saved profile picture
      try{
        const saved = localStorage.getItem('profilePic');
        if(saved) document.getElementById('profilePic').innerHTML = `<img src="${saved}" style="width:100%;height:100%;object-fit:cover;border-radius:50%">`;
      }catch(e){}

      // Input fields save to localStorage
      document.querySelectorAll('.input-field').forEach(input=>{
        const key = input.getAttribute('data-key');
        if(key){
          try{
            const saved = localStorage.getItem(key);
            if(saved) input.value = saved;
          }catch(e){}
          input.addEventListener('change', ()=>{
            try{localStorage.setItem(key, input.value)}catch(e){}
          });
        }
      });

      // Select fields
      document.querySelectorAll('.select-field').forEach(select=>{
        const key = select.getAttribute('data-key');
        if(key){
          try{
            const saved = localStorage.getItem(key);
            if(saved) select.value = saved;
          }catch(e){}
          select.addEventListener('change', ()=>{
            try{localStorage.setItem(key, select.value)}catch(e){}
          });
        }
      });

      // Change password
      const changePassBtn = document.getElementById('changePassBtn');
      if(changePassBtn){
        changePassBtn.addEventListener('click', ()=>{
          const current = prompt('Enter current password:');
          if(current){
            const newPass = prompt('Enter new password:');
            if(newPass && newPass.length >= 6){
              alert('‚úì Password changed successfully!');
            } else {
              alert('‚úó Password must be at least 6 characters');
            }
          }
        });
      }

      // Logout all devices
      const logoutAllBtn = document.getElementById('logoutAllBtn');
      if(logoutAllBtn){
        logoutAllBtn.addEventListener('click', ()=>{
          if(confirm('This will log you out from all devices. Continue?')){
            alert('‚úì Logged out from all devices');
          }
        });
      }

      // Clear cache
      const clearCacheBtn = document.getElementById('clearCacheBtn');
      if(clearCacheBtn){
        clearCacheBtn.addEventListener('click', ()=>{
          if(confirm('Clear all cached data?')){
            try{
              localStorage.clear();
              sessionStorage.clear();
              alert('‚úì Cache cleared successfully!');
              location.reload();
            }catch(e){}
          }
        });
      }

      // Contact support
      const contactBtn = document.getElementById('contactBtn');
      if(contactBtn){
        contactBtn.addEventListener('click', ()=>{
          alert('Support contact:\nEmail: support@school.com\nWhatsApp: +91-XXXXXXXXXX');
        });
      }

      // Report problem
      const reportBtn = document.getElementById('reportBtn');
      if(reportBtn){
        reportBtn.addEventListener('click', ()=>{
          const issue = prompt('Describe the issue:');
          if(issue){
            alert('‚úì Issue reported successfully!');
          }
        });
      }
    });

    function toggleTheme(){
      document.body.classList.toggle('light-theme');
      try{
        const isLight=document.body.classList.contains('light-theme');
        localStorage.setItem('theme',isLight?'light':'dark');
      }catch(e){}
    }
  </script>
</head>
<body>
  <div class="header">
    <h1>Settings</h1>
    <p>Manage your account and preferences</p>
  </div>

  <div class="container">
    <!-- Profile Settings -->
    <div class="settings-section">
      <div class="section-title">üë§ Profile Settings</div>
      
      <div class="profile-pic-container">
        <div class="profile-pic" id="profilePic">KS</div>
        <button class="btn" id="uploadProfileBtn">Upload Picture</button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Full Name</strong><span>Your display name</span></div>
        <input type="text" class="input-field" data-key="studentName" placeholder="Enter your name" />
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Email</strong><span>Your email address</span></div>
        <input type="email" class="input-field" data-key="studentEmail" placeholder="your.email@school.com" />
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Phone</strong><span>Contact number</span></div>
        <input type="tel" class="input-field" data-key="studentPhone" placeholder="+91-XXXXXXXXXX" />
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Course</strong><span>Academic program</span></div>
        <select class="select-field" data-key="studentCourse">
          <option value="">Select Course</option>
          <option value="btech">B.Tech</option>
          <option value="diploma">Diploma</option>
          <option value="mtech">M.Tech</option>
          <option value="bca">BCA</option>
        </select>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Year</strong><span>Academic year</span></div>
        <select class="select-field" data-key="studentYear">
          <option value="">Select Year</option>
          <option value="1">1st Year</option>
          <option value="2">2nd Year</option>
          <option value="3">3rd Year</option>
          <option value="4">4th Year</option>
        </select>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Division</strong><span>Class division</span></div>
        <select class="select-field" data-key="studentDivision">
          <option value="">Select Division</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
        </select>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Roll Number</strong><span>Enrollment number</span></div>
        <input type="text" class="input-field" data-key="rollNumber" />
      </div>
    </div>

    <!-- Account Security -->
    <div class="settings-section">
      <div class="section-title">üîê Account Security</div>

      <div class="setting-item">
        <div class="setting-label"><strong>Password</strong><span>Change your account password</span></div>
        <button class="btn" id="changePassBtn">Change Password</button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Two-Factor Auth</strong><span>Extra security</span></div>
        <button class="toggle-switch" data-key="twoFactorAuth"></button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Linked Email</strong><span>Backup email</span></div>
        <input type="email" class="input-field" data-key="linkedEmail" />
      </div>
    </div>

    <!-- Theme & Display -->
    <div class="settings-section">
      <div class="section-title">üé® Theme & Display</div>

      <div class="setting-item">
        <div class="setting-label"><strong>Dark Theme</strong><span>Switch mode</span></div>
        <button class="toggle-switch active" onclick="toggleTheme()"></button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Font Size</strong><span>Accessibility</span></div>
        <select class="select-field" data-key="fontSize">
          <option value="small">Small</option>
          <option value="medium" selected>Medium</option>
          <option value="large">Large</option>
          <option value="xlarge">Extra Large</option>
        </select>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Language</strong><span>Select language</span></div>
        <select class="select-field" data-key="language">
          <option value="en" selected>English</option>
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
          <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
          <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
        </select>
      </div>
    </div>

    <!-- Notifications -->
    <div class="settings-section">
      <div class="section-title">üîî Notifications</div>

      <div class="setting-item">
        <div class="setting-label"><strong>Attendance Reminders</strong><span>Class time alerts</span></div>
        <button class="toggle-switch active" data-key="attendanceReminders"></button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Late-Mark Alerts</strong><span>Late marking</span></div>
        <button class="toggle-switch" data-key="lateMarkAlerts"></button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Event Notifications</strong><span>Holidays & events</span></div>
        <button class="toggle-switch active" data-key="eventNotifications"></button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Lecture Reminders</strong><span>Attendance discrepancies</span></div>
        <button class="toggle-switch" data-key="lectureReminders"></button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Push Notifications</strong><span>Browser alerts</span></div>
        <button class="toggle-switch active" data-key="pushNotifications"></button>
      </div>
    </div>

    <!-- Device & Privacy -->
    <div class="settings-section">
      <div class="section-title">üì± Device & Privacy</div>

      <div style="margin-bottom:16px">
        <strong>Login History</strong>
        <div style="color:var(--muted);font-size:12px;margin-bottom:12px">Recent devices</div>
        <div class="device-item">
          <div><div class="device-info">üíª Chrome on Windows</div><div class="device-time">2 hours ago</div></div>
          <button class="btn secondary" style="padding:6px 12px;font-size:12px">Logout</button>
        </div>
        <div class="device-item">
          <div><div class="device-info">üì± Safari on iPhone</div><div class="device-time">1 day ago</div></div>
          <button class="btn secondary" style="padding:6px 12px;font-size:12px">Logout</button>
        </div>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Logout All Devices</strong><span>End all sessions</span></div>
        <button class="btn danger" id="logoutAllBtn">Logout All</button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Data Privacy</strong><span>Visibility control</span></div>
        <button class="toggle-switch active" data-key="dataPrivacy"></button>
      </div>
    </div>

    <!-- App Controls -->
    <div class="settings-section">
      <div class="section-title">‚öôÔ∏è App Controls</div>

      <div class="setting-item">
        <div class="setting-label"><strong>Clear Cache</strong><span>Improve performance</span></div>
        <button class="btn secondary" id="clearCacheBtn">Clear</button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Default Homepage</strong><span>Landing page</span></div>
        <select class="select-field" data-key="homepage">
          <option value="dashboard" selected>Dashboard</option>
          <option value="attendance">Attendance Report</option>
          <option value="records">Records</option>
          <option value="insights">Insights</option>
        </select>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Auto-Logout</strong><span>Inactivity timeout</span></div>
        <select class="select-field" data-key="autoLogout">
          <option value="15">15 minutes</option>
          <option value="30" selected>30 minutes</option>
          <option value="60">1 hour</option>
          <option value="never">Never</option>
        </select>
      </div>
    </div>

    <!-- Support -->
    <div class="settings-section">
      <div class="section-title">üí¨ Support & Help</div>

      <div class="setting-item">
        <div class="setting-label"><strong>Report Problem</strong><span>Report issues</span></div>
        <button class="btn secondary" id="reportBtn">Report</button>
      </div>

      <div class="setting-item">
        <div class="setting-label"><strong>Contact Support</strong><span>Get help</span></div>
        <button class="btn secondary" id="contactBtn">Contact</button>
      </div>

      <div style="margin-top:16px">
        <strong>FAQ</strong>
        <div style="margin-top:8px">
          <div class="faq-item">
            <div class="faq-question">
              <span>How do I update my attendance?</span>
              <span>‚ñº</span>
            </div>
            <div class="faq-answer">Attendance is auto-updated when you check in. View records in Records section. Contact support for discrepancies.</div>
          </div>

          <div class="faq-item">
            <div class="faq-question">
              <span>How to change password?</span>
              <span>‚ñº</span>
            </div>
            <div class="faq-answer">Click "Change Password" button. Enter current password, then new one (6+ characters).</div>
          </div>

          <div class="faq-item">
            <div class="faq-question">
              <span>What is Two-Factor Auth?</span>
              <span>‚ñº</span>
            </div>
            <div class="faq-answer">Extra security requiring OTP code in addition to password when logging in.</div>
          </div>

          <div class="faq-item">
            <div class="faq-question">
              <span>How to clear cache?</span>
              <span>‚ñº</span>
            </div>
            <div class="faq-answer">Click "Clear Cache" in App Controls. This removes stored data and improves performance.</div>
          </div>
        </div>
      </div>
    </div>

    <div style="height:20px"></div>
  </div>

  <div class="footer">
    <div>
      <p>¬© 2025 Student Attendance System | App Version: 2.1.0</p>
    </div>
    <a class="btn secondary" href="dashboard2.html">‚Üê Back to Dashboard</a>
  </div>
</body>
</html>

